"use strict";angular.module("yaru22.angular-timeago",[]).directive("timeAgo",["timeAgo","nowTime",function(a,b){return{restrict:"EA",link:function(c,d,e){var f;e.$observe("fromTime",function(b){f=a.parse(b)}),c.$watch(function(){return b()-f},function(b){angular.element(d).text(a.inWords(b))})}}}]).factory("nowTime",["$window","$rootScope",function(a,b){var c=Date.now(),d=function(){a.setTimeout(function(){b.$apply(function(){c=Date.now(),d()})},1e3)};return d(),function(){return c}}]).factory("timeAgo",function(){var a={};return a.settings={refreshMillis:6e4,allowFuture:!1,strings:{en_US:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]},de_DE:{prefixAgo:"vor",prefixFromNow:null,suffixAgo:null,suffixFromNow:"from now",seconds:"weniger als einer Minute",minute:"ca. einer Minute",minutes:"%d Minuten",hour:"ca. einer Stunde",hours:"ca. %d Stunden",day:"einem Tag",days:"%d Tagen",month:"ca. einem Monat",months:"%d Monaten",year:"ca. einem Jahr",years:"%d Jahren",numbers:[]},he_IL:{prefixAgo:null,prefixFromNow:null,suffixAgo:"לפני",suffixFromNow:"מעכשיו",seconds:"פחות מדקה",minute:"כדקה",minutes:"%d דקות",hour:"כשעה",hours:"כ %d שעות",day:"יום",days:"%d ימים",month:"כחודש",months:"%d חודשים",year:"כשנה",years:"%d שנים",numbers:[]},pt_BR:{prefixAgo:null,prefixFromNow:"daqui a",suffixAgo:"atrás",suffixFromNow:null,seconds:"menos de um minuto",minute:"cerca de um minuto",minutes:"%d minutos",hour:"cerca de uma hora",hours:"cerca de %d horas",day:"um dia",days:"%d dias",month:"cerca de um mês",months:"%d meses",year:"cerca de um ano",years:"%d anos",numbers:[]},fr_FR:{prefixAgo:"il y a",prefixFromNow:null,suffixAgo:null,suffixFromNow:"from now",seconds:"moins d'une minute",minute:"environ une minute",minutes:"%d minutes",hour:"environ une heure",hours:"environ %d heures",day:"un jour",days:"%d jours",month:"environ un mois",months:"%d mois",year:"environ un an",years:"%d ans",numbers:[]}}},a.inWords=function(b){function c(a,c){var d=angular.isFunction(a)?a(c,b):a,f=e.numbers&&e.numbers[c]||c;return d.replace(/%d/i,f)}var d=document.documentElement.lang,e=a.settings.strings[d];"undefined"==typeof e&&(e=a.settings.strings.en_US);var f=e.prefixAgo,g=e.suffixAgo;a.settings.allowFuture&&0>b&&(f=e.prefixFromNow,g=e.suffixFromNow);var h=Math.abs(b)/1e3,i=h/60,j=i/60,k=j/24,l=k/365,m=45>h&&c(e.seconds,Math.round(h))||90>h&&c(e.minute,1)||45>i&&c(e.minutes,Math.round(i))||90>i&&c(e.hour,1)||24>j&&c(e.hours,Math.round(j))||42>j&&c(e.day,1)||30>k&&c(e.days,Math.round(k))||45>k&&c(e.month,1)||365>k&&c(e.months,Math.round(k/30))||1.5>l&&c(e.year,1)||c(e.years,Math.round(l)),n=void 0===e.wordSeparator?" ":e.wordSeparator;return"he_IL"===d?[f,g,m].join(n).trim():[f,m,g].join(n).trim()},a.parse=function(a){if(angular.isNumber(a))return parseInt(a,10);if(a instanceof Date)return a;var b=(a||"").trim();return b=b.replace(/\.\d+/,""),b=b.replace(/-/,"/").replace(/-/,"/"),b=b.replace(/T/," ").replace(/Z/," UTC"),b=b.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(b)},a}).filter("timeAgo",["nowTime","timeAgo",function(a,b){return function(c){var d=b.parse(c),e=a()-d;return b.inWords(e)}}]),angular.module("githubEvents.controllers",[]).controller("roGithubEventsCtrl",["$scope","$element","$attrs","$compile","githubEvents","$timeout",function(a,b,c,d,e){var f=this;angular.isDefined(a.user)||(a.user=e.getUser()),angular.isDefined(a.minimal)||(a.minimal=!1),angular.isDefined(a.limit)||(a.limit=30),angular.isDefined(a.icon)||(a.icon=!1),a.events=[],a.getTemplate=e.getTemplate,a.error,a.eventsError=!1,a.eventsReady=!1,f.setLoader=function(a){f.loader=a},a.$on("eventsReadyEvent",function(b,c){a.eventsReady=!0,a.events=c}),a.$on("eventsErrorEvent",function(b,c){a.eventsError=!0,a.error=c,f.setLoader(d(e.getError())(a))}),a.hasFeature=function(b){var c;if(a.minimal)switch(b){case"date":case"heading":c=angular.isDefined(a[b])?a[b]:!0;break;case"icon":case"avatar":case"body":c=angular.isDefined(a[b])?a[b]:!1;break;default:c=angular.isDefined(a[b])?a[b]:!0}else c=angular.isDefined(a[b])?a[b]:!0;return a[b]=c,c},e.events(a.user).$promise.then(function(b){a.$emit("eventsReadyEvent",b)},function(b){a.$emit("eventsErrorEvent",b)})}]),angular.module("githubEvents.directives",["githubEvents.filters","githubEvents.controllers"]).directive("roGithubEvents",function(){return{restrict:"E",templateUrl:"template/github-events/github-events.html",transclude:!0,replace:!0,scope:{user:"@",minimal:"=?",limit:"=?",icon:"=?",date:"=?",heading:"=?",avatar:"=?",body:"=?"},controller:"roGithubEventsCtrl"}}).directive("roGithubTransclude",["githubEvents",function(a){return{require:"^roGithubEvents",link:function(b,c,d,e){b.$watch(function(){return e[d.roGithubTransclude]},function(b){b?(c.html(""),c.append(b)):(c.html(""),c.append(a.getLoader()))})}}}]).directive("roGithubLoader",["$templateCache",function(){return{restrict:"E",template:"",transclude:!0,replace:!0,require:"^roGithubEvents",link:function(a,b,c,d,e){d.setLoader(e(a,function(){}))}}}]),angular.module("githubEvents.filters",[]).filter("roCleanUrl",function(){return function(a){var b;return b=a.replace(/\/\/api./g,"//").replace(/\.com\/(users|repos)/g,".com").replace(/pulls\//g,"pull/")}}).filter("roMakeRef",function(){return function(a){var b=a.replace(/refs\/heads\//g,"");return b}}).filter("roMakeUrl",["roMakeRefFilter","limitToFilter",function(a,b){return function(c,d,e){var f,g="https://github.com",h={"default":"",repo:":repo",tree:":repo/tree/:branch",compare:":repo/compare/:commits",tagZip:":repo/archive/:tagName.zip"};return e.branch&&(e.branch=a(e.branch)),"compare"==d&&e.commits&&(e.commits=e.commits.length-2==2?b(e.commits[e.commits.length-2].sha,10)+"..."+b(e.commits[e.commits.length-1].sha,10):b(e.commits[0].sha,10)+"..."+b(e.commits[1].sha,10)),h[d]&&(f=[g,h[d].replace(/:[a-z0-9-_]+/gi,function(a){return e[a.replace(":","")]})].join("/")),f}}]).filter("roIgnoreAllAfterFirstNewLine",function(){return function(a){var b;return b=a.replace(/\n(.)+/gim,"").replace(/[\n\r]/gim,"")}}).filter("roIgnoreAllAfterFirstDot",function(){return function(a){var b;return b=a.replace(/\.\s+(.)+/gim,"").replace(/[\n\r]/gim,""),b+"."}});var GithubEventsProvider=function(){var a="",b="<b>Loading Github Events...</b>",c=["<h4>GithubEvents: Something went wrong, please review your configuration.</h4>","<p>","<b>Message:</b> <mark>{{error.message | roIgnoreAllAfterFirstNewLine}}</mark>","<ul>","<li>Make sure the profile you are trying to access is currently active</li>","<li>Make sure the privacy settings are allowing public events to be accessible</li>","<li>Make sure your Internet connection is active</li>","<li>If the issue persists you can ask for some advice in the forum or submit an issue</li>","</ul><br>",'<small>You can customize this error message during the configuration phase of your application by using:<br> <code>githubEventsProvider.error("You custom message")</code><br><br> See the GithubEvents project page for further reading.<small>',"</p>"].join("\n");this.username=function(b){return a=b,this},this.template=function(a,b,c){return f[a]&&(angular.isObject(b)?angular.forEach(b,function(b,c){f[a][c]=b}):f[a][b]=c),this},this.loader=function(a){return b="<b>loader</b>".replace("loader",a),this},this.error=function(a){return c=a,this};var d="templates/github-events",e={icon:"",date:"<small>{{event.created_at | timeAgo}}</small>",heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a>',"{{event.payload.action}}",'<a href="{{event.repo.url | roCleanUrl}}">{{event.repo.full_name}}</a>',"</h4>"].join("\n"),avatar:['<a href="{{event.actor.url | roCleanUrl}}">','<img ng-src="{{event.actor.avatar_url}}?v=3&s=30" alt="{{event.actor.login}}">',"</a>"].join("\n"),body:"<p>{{event.type}}</p>",empty:""},f={"default":e,CommitCommentEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ','commented on commit <a href="{{event.payload.comment.html_url}}">{{event.repo.name}}@{{event.payload.comment.commit_id | limitTo:10}}</a>',"</h4>"].join("\n"),body:"<p>{{event.payload.comment.body | roIgnoreAllAfterFirstNewLine | roIgnoreAllAfterFirstDot}}</p>"},CreateEvent:{heading:["<small>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> created {{event.payload.ref_type}} ',"<span ng-if=\"event.payload.ref_type == 'tag'\">","<mark>","<a href=\"{{ '' | roMakeUrl:'tree':{repo:event.repo.name, branch:event.payload.ref} }}\">{{event.payload.ref | roMakeRef}}</a>"," </mark> at","</span>"," <a href=\"{{ '' | roMakeUrl:'repo':{repo:event.repo.name} }}\">{{event.repo.name}}</a> ","{{event.created_at | timeAgo}}","<small>"].join("\n"),date:" ",body:" ",avatar:" "},DeleteEvent:{heading:["<small>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> deleted {{event.payload.ref_type}} ',"{{event.payload.ref}}","at <a href=\"{{ '' | roMakeUrl:'repo':{repo:event.repo.name} }}\">{{event.repo.name}}</a> ","{{event.created_at | timeAgo}}","<small>"].join("\n"),date:" ",body:" ",avatar:" "},DeploymentEvent:e,DeploymentStatusEvent:e,DownloadEvent:e,FollowEvent:e,ForkEvent:{heading:["<small>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> forked ','<a href="{{ event.repo.url | roCleanUrl }}">{{event.repo.name}}</a> ','at <a href="{{event.payload.forkee.html_url}}">{{event.payload.forkee.full_name}}</a> ',"{{event.created_at | timeAgo}}","<small>"].join("\n"),date:" ",body:" ",avatar:" "},ForkApplyEvent:e,GistEvent:e,GollumEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ','{{event.payload.pages[0].action}} the <a href="{{event.repo.url | roCleanUrl}}">{{event.repo.name}}</a> wiki',"</h4>"].join("\n"),body:'<p ng-repeat="page in event.payload.pages">{{page.action}} <a href="{{page.html_url}}">{{page.title}}</a>.</p>'},IssueCommentEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ','commented on issue <a href="{{event.payload.issue.html_url}}">{{event.repo.name}}#{{event.payload.issue.number}}</a>',"</h4>"].join("\n"),body:"<p>{{event.payload.comment.body | roIgnoreAllAfterFirstNewLine }}</p>"},IssuesEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ',"{{event.payload.action}} issue ",'<a href="{{ event.payload.issue.html_url }}">{{ event.repo.name }}#{{event.payload.issue.number}}</a> ',"</h4>"].join("\n"),body:["<p>{{event.payload.issue.title}}</p>"].join("\n")},MemberEvent:{heading:["<small>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> added ','<a href="{{ event.payload.user.url | roCleanUrl }}">{{event.payload.user.login}}</a> ','to <a href="{{event.repo.url | roCleanUrl}}">{{event.repo.name}}</a> ',"{{event.created_at | timeAgo}}","<small>"].join("\n"),date:" ",body:" ",avatar:" "},MembershipEvent:e,PageBuildEvent:e,PublicEvent:{heading:["<small>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> has made ','<a href="{{event.repo.url | roCleanUrl}}">{{event.repo.name}}</a> public',"{{event.created_at | timeAgo}}","<small>"].join("\n"),date:" ",body:" ",avatar:" "},PullRequestEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ',"{{event.payload.action}} pull request ",'<a href="{{ event.payload.pull_request.url | roCleanUrl }}">{{ event.repo.name }}#{{event.payload.pull_request.number}}</a> ',"</h4>"].join("\n"),body:["<p>","{{event.payload.pull_request.title}} <br>","</p>","<p>","<mark>","{{event.payload.pull_request.commits | number}} {{  {true:'commit', false:'commits'}[event.payload.pull_request.commits==1]  }} with","{{event.payload.pull_request.additions | number}} {{  {true:'addition', false:'additions'}[event.payload.pull_request.additions==1]  }} and","{{event.payload.pull_request.deletions | number}} {{  {true:'deletions', false:'deletions'}[event.payload.pull_request.deletions==1]  }}","</mark>","</p>"].join("\n")},PullRequestReviewCommentEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ',"commented on a pull request ",'<a href="{{ event.payload.comment.html_url }}">{{ event.repo.name }}#{{event.payload.pull_request.number}}</a> ',"</h4>"].join("\n"),body:["<p>{{event.payload.comment.body | roIgnoreAllAfterFirstDot}}</p>"].join("\n")},PushEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ',"pushed to <a href=\"{{'' | roMakeUrl:'tree':{repo:event.repo.name, branch:event.payload.ref} }}\">{{  event.payload.ref | roMakeRef }}</a> ",'at <a href="{{event.repo.url | roCleanUrl}}">{{event.repo.name}}</a>',"</h4>"].join("\n"),body:["<p class=\"commit commit-{{$index}}\" ng-repeat=\"commit in event.payload.commits | limitTo:2\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\" ng-class=\"[{true:'first'}[$first], {true:'middle'}[$middle], {true:'last'}[$last]]\">",'<img ng-src="{{event.actor.avatar_url}}?v=3&s=16" alt="{{event.actor.login}}"> ','<code><a href="{{commit.url | roCleanUrl}}">{{commit.sha | limitTo:7}}</a></code> {{commit.message | roIgnoreAllAfterFirstNewLine }}',"</p>",'<small ng-if="event.payload.commits.length - 2 == 2">',"<a href=\"{{ '' | roMakeUrl:'compare':{repo:event.repo.name, commits:event.payload.commits } }}\">{{event.payload.commits.length - 2}} more commits »</a>","</small>",'<small ng-if="event.payload.commits.length == 2">',"<a href=\"{{ '' | roMakeUrl:'compare':{repo:event.repo.name, commits:event.payload.commits } }}\">View comparison for these 2 commits »</a>","</small>"].join("\n")},ReleaseEvent:{heading:["<h4>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> ','released <a href="{{ event.payload.release.html_url }}">{{  event.payload.release.name }}</a> ','at <a href="{{event.repo.url | roCleanUrl}}">{{event.repo.name}}</a>',"</h4>"].join("\n"),body:["<p>","<a href=\"{{'' | roMakeUrl:'tagZip':{repo:event.repo.name, tagName:event.payload.release.tag_name} }}\">Source code (zip)</a>","</p>"].join("\n")},RepositoryEvent:e,StatusEvent:e,TeamAddEvent:e,WatchEvent:{heading:["<small>",'<a href="{{event.actor.url | roCleanUrl}}">{{event.actor.login}}</a> starred ','<a href="{{ event.repo.url | roCleanUrl }}">{{event.repo.name}}</a>',"{{event.created_at | timeAgo}}","<small>"].join("\n"),date:" ",body:" ",avatar:" "}};this.$get=["$resource","$templateCache",function(e,g){var h=e("https://api.github.com/users/:username/events/public",null,{cache:!0});return angular.forEach(f,function(a,b){angular.forEach(a,function(a,c){var e,f;e=d+"/type-section.html",f=e.replace("type",b).replace("section",c),g.put(f,a)})}),{events:function(a){return h.query({username:a})},getUser:function(){return a},getTemplate:function(a,b){(!f[a]||f[a]&&!f[a][b])&&(a="default",f[a][b]||(b="empty"));var c=d+"/type-section.html",e=c.replace("type",a).replace("section",b);return e},getLoader:function(){return b},getError:function(){return c}}}]};angular.module("githubEvents.providers",[]).provider("githubEvents",GithubEventsProvider),angular.module("githubEvents.tpls",["template/github-events/github-events.html"]),angular.module("template/github-events/github-events.html",[]).run(["$templateCache",function(a){a.put("template/github-events/github-events.html",['<ul class="media-list ro-github-events">','<div class="ro-github-loader" ng-transclude ro-github-transclude="loader" ng-hide="eventsReady">{{loader}}</div>',"<li class=\"media ro-github-event ro-github-event-{{$index}}\" ng-class-odd=\"'odd'\" ng-class-even=\"'even'\" ng-class=\"[{true:'first'}[$first], {true:'middle'}[$middle], {true:'last'}[$last]]\" ng-repeat=\"event in events | orderBy: '-created_at' | limitTo:limit track by $index \">",'<div class="media-left ro-github-event-icon" ng-include="getTemplate(event.type, \'icon\')" ng-if="hasFeature(\'icon\')"></div>','<div class="media-body ro-github-event-body-container">','<div class="ro-github-event-date" ng-include="getTemplate(event.type, \'date\')" ng-if="hasFeature(\'date\')"></div>','<div class="media-heading ro-github-event-heading" ng-include="getTemplate(event.type, \'heading\')" ng-if="hasFeature(\'heading\')"></div>','<div class="media-left ro-github-event-avatar" ng-include="getTemplate(event.type, \'avatar\')" ng-if="hasFeature(\'avatar\')"></div>','<div class="media-body ro-github-event-body" ng-include="getTemplate(event.type, \'body\')" ng-if="hasFeature(\'body\')"></div>',"</div>","</li>","</ul>"].join("\n"))}]),angular.module("githubEvents",["ngResource","yaru22.angular-timeago","githubEvents.providers","githubEvents.tpls","githubEvents.filters","githubEvents.controllers","githubEvents.directives"]);